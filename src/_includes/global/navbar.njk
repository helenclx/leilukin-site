<nav class="navbar">
    <button class="navbar__toggle" aria-label="Navigation menu toggle" aria-expanded="false">
        <span aria-hidden="true">â˜°</span>
        <h2 class="navbar__title">Navigation</h2>
    </button>
    <ul class="navbar__links">
        {% block navbarLinks %}
            {{ navbarLinks }}
        {% endblock %}
    </ul>
</nav>

<style>
    .navbar {
        background: var(--clr-navbar-bg);
        padding: 0.6em 1em;
        width: 100%;
        z-index: 999;
        position: sticky;
        top: 0;
    }

    .navbar__toggle,
    .navbar__title {
        color: var(--clr-navbar-link);
        font-size: 1.3rem;
    }

    .navbar__toggle {
        display: flex;
        align-items: center;
        gap: 0.3em;
        border: none;
        padding: 0;
        margin: 0;
        background-color: inherit;
    }

    .navbar__toggle:focus,
    .navbar__links a:focus {
        outline: 0.15em solid var(--clr-navbar-link);
    }

    .navbar__links {
        list-style: none;
        padding: 0.2em 0 0 0;
        display: none;
        flex-wrap: wrap;
        gap: 1em;
    }

    .navbar__links--show {
        display: flex;
    }

    .navbar__links a {
        color: var(--clr-navbar-link);
        text-decoration: none;
        cursor: pointer;
        display: block;
    }

    .navbar__links a:hover {
        color: var(--clr-link-hover);
    }

    .navbar__links a:focus {
        outline-offset: 0.2em;
    }

    /* Tablet screen size */
    @media only screen and (min-width: 43.75rem) {
        .navbar {
            padding: 0 0.6em;
        }

        .navbar__toggle {
            display: none;
        }

        .navbar__links {
            display: flex;
            justify-content: space-evenly;
            gap: 0.5em;
            padding: 0;
        }
    }
</style>

<script defer>
    {# Accessible hamburger menu navigation script based on:
    https://accessibleweb.dev/navigation #}
    const navbarToggle = document.querySelector(".navbar__toggle");
    const navbarLinks = document.querySelector(".navbar__links");
    const navbarLinkItems = document.querySelectorAll(".navbar__links li a");

    const openNavigation = () => {
        navbarLinks.classList.add("navbar__links--show");
        navbarToggle.ariaExpanded = "true";
    };

    const closeNavigation = () => {
        navbarLinks.classList.remove("navbar__links--show");
        navbarToggle.ariaExpanded = "false";
    };

    const toggleNavigation = () => {
        const open = navbarToggle.ariaExpanded;
        open === "false" ? openNavigation() : closeNavigation();
    }

    navbarToggle.addEventListener("click", toggleNavigation);

    window.addEventListener("keyup", (e) => {
        if (e.key === "Escape") {
            navbarToggle.focus();
            closeNavigation();
        }
    });

    const handleBlur = (event) => {
        const navList = event.currentTarget.closest(".navbar__links");
        if (!event.relatedTarget || !navList.contains(event.relatedTarget)) {
            closeNavigation();
        }
    };

    navbarLinkItems[navbarLinkItems.length - 1].addEventListener("blur", handleBlur);
</script>